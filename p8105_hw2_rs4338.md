p8105_hw2_rs4338
================
Rebecca Shyu
2024-09-28

``` r
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
```

## Problem 0:

- Create a public GitHub repo + local R Project: p8105_hw2_rs4338
- Create a single .Rmd file named p8105_hw2_rs4338.Rmd that renders to
  github_document
- Create a subdirectory (data) to store the local data files, and use
  relative paths to access these data files
- Submit a link to your repo via Courseworks
  - <https://github.com/rysgpd/p8105_hw2_rs4338>

## Problem 1:

- Reading & Cleaning the Dataset
  - Before processing, there were 32 variables and 1,868 rows included
    in the dataset. It looks like each row is an entrance and/or exit to
    a station, so there can be many rows for a single station. It
    provides information about the location (longitude/latitude of both
    entrance/exit and station) and characteristics (ex: ADA accessible,
    vending, staffing, etc) of the entrance/exit. There are also up to
    11 routes that may stop at the station.
  - Some data cleaning steps I took were: cleaning names using the
    `janitor` package, converted route8 to route11 to `character` when
    reading in the csv file, selecting the variables outlined in the
    homework assignment (line, station, name, station latitude /
    longitude, routes served, entrance type, entry, vending, and ADA
    compliance) through the `select` function, changed the entry and
    vending variables from YES/NO to 0/1 from the instructions through
    the `mutate` function.
  - The dimensions of the resulting table are 19 variables/columns and
    1,868 rows/entrances/exits.
  - The data is tidy because the columns are variable names not values,
    each column has multiple variables, and there is only one table.

``` r
initial_nyc_transit_df= read_csv("data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") 

nyc_transit_df = read_csv("data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
                          col_types = cols(
                            Route8 = "c",
                            Route9 = "c",
                            Route10 = "c",
                            Route11 = "c",
                            )
                          ) %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(
    entry = ifelse(entry == "YES", 1, 0),
    vending = ifelse(vending == "YES", 1, 0)
  )

nyc_transit_df
```

    ## # A tibble: 1,868 × 19
    ##    line     station_name station_latitude station_longitude route1 route2 route3
    ##    <chr>    <chr>                   <dbl>             <dbl> <chr>  <chr>  <chr> 
    ##  1 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ##  2 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ##  3 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ##  4 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ##  5 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ##  6 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ##  7 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ##  8 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ##  9 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ## 10 4 Avenue 53rd St                  40.6             -74.0 R      <NA>   <NA>  
    ## # ℹ 1,858 more rows
    ## # ℹ 12 more variables: route4 <chr>, route5 <chr>, route6 <chr>, route7 <chr>,
    ## #   route8 <chr>, route9 <chr>, route10 <chr>, route11 <chr>,
    ## #   entrance_type <chr>, entry <dbl>, vending <dbl>, ada <lgl>

- Answer the following questions:
  - There are 465 distinct stations (using the `distinct` function)
  - There are 84 distinct stations that are ADA-compliant.
  - The proportion of station entrances/exits w/o vending that allow
    entrance is 0.3770492.
  - Reformatting the data using the `unite` function, there are

  How many distinct stations serve the A train? Of the stations that
  serve the A train, how many are ADA compliant?

``` r

nyc_transit_df %>% 
  distinct(line, station_name) %>% 
  count()
## # A tibble: 1 × 1
##       n
##   <int>
## 1   465

nyc_transit_df %>% 
  distinct(line, station_name, .keep_all = TRUE) %>% 
  filter(ada == TRUE) %>% 
  count()
## # A tibble: 1 × 1
##       n
##   <int>
## 1    84

no_vending_num = 
  nyc_transit_df %>% 
  filter(
    vending == 0
    ) %>% 
  count()

no_vending_yes_entry =
  nyc_transit_df %>% 
  filter(
    vending == 0,
    entry == 1
  ) %>% 
  count()

no_vending_yes_entry/no_vending_num
##           n
## 1 0.3770492
```

## Problem 2:

- Read and clean the Mr. Trash Wheel datasets to produce a single tidy
  dataset (trash_df)
- The final tidy dataset is comprised of 845 total observations with 584
  from Mr. Trash Wheel, 106 from Professor Trash Wheel, and 155 from
  Gwynnda. The data spanned from 2014 to 2023 and included specific
  dates that the trash was collected. The dataset also includes the
  weight (tons) that ranged from 0.61 to 5.62, volume (cubic yards) that
  ranged from 5 to 20, and the number of pollutant objects found. These
  included plastic bottles, polystyrene, cigarette butts, glass bottles,
  plastic bags, wrappers, and sports balls. Almost all of the objects
  were counted for each dumpster check, except there were 156 missing
  for glass bottles, 118 for wrappers, and 261 for sports balls. The
  object with the largest mean among all dumpsters was cigarette butts
  at 15,592. The dataset also calculated the estimated number of homes
  powered by the collected trash.
- The total weight of trash collected by Professor Trash Wheel was
  1875.1 tons.
- The total number of cigarette butts collected by Gwynnda in June 2022
  was 18,120.

``` r

mr_trash_df = read_excel("data/202309 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", range="A2:N586") %>% 
  janitor::clean_names() %>% 
  mutate(
    sports_balls = round(sports_balls, digits = 0),
    sports_balls = as.integer(sports_balls),
    year = as.double(year),
    wheel = "mr_trash"
  )

prof_trash_df = read_excel("data/202309 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", range="A2:M108") %>% 
  janitor::clean_names() %>% 
  mutate(
    wheel = "prof_trash"
  )

gwynnda_df = read_excel("data/202309 Trash Wheel Collection Data.xlsx", sheet = "Gwynnda Trash Wheel", range="A2:L157") %>% 
  janitor::clean_names()%>% 
  mutate(
    wheel = "gwynnda"
  )

trash_df = 
  bind_rows(mr_trash_df, prof_trash_df, gwynnda_df) %>% 
  relocate(wheel)
  
summary(trash_df)
##     wheel              dumpster      month                year     
##  Length:845         Min.   :  1   Length:845         Min.   :2014  
##  Class :character   1st Qu.: 71   Class :character   1st Qu.:2017  
##  Mode  :character   Median :162   Mode  :character   Median :2019  
##                     Mean   :223                      Mean   :2019  
##                     3rd Qu.:373                      3rd Qu.:2021  
##                     Max.   :584                      Max.   :2023  
##                                                                    
##       date                         weight_tons    volume_cubic_yards
##  Min.   :1900-01-20 00:00:00.00   Min.   :0.610   Min.   : 5.00     
##  1st Qu.:2017-06-21 00:00:00.00   1st Qu.:2.490   1st Qu.:15.00     
##  Median :2019-10-25 00:00:00.00   Median :3.070   Median :15.00     
##  Mean   :2019-06-08 04:53:06.75   Mean   :3.009   Mean   :15.13     
##  3rd Qu.:2021-11-04 00:00:00.00   3rd Qu.:3.540   3rd Qu.:15.00     
##  Max.   :2023-06-30 00:00:00.00   Max.   :5.620   Max.   :20.00     
##                                                                     
##  plastic_bottles  polystyrene    cigarette_butts  glass_bottles   
##  Min.   :   0    Min.   :    0   Min.   :     0   Min.   :  0.00  
##  1st Qu.:1000    1st Qu.:  280   1st Qu.:  3200   1st Qu.: 10.00  
##  Median :1980    Median :  950   Median :  5500   Median : 18.00  
##  Mean   :2296    Mean   : 1631   Mean   : 15592   Mean   : 20.89  
##  3rd Qu.:2900    3rd Qu.: 2400   3rd Qu.: 16000   3rd Qu.: 28.00  
##  Max.   :9830    Max.   :11528   Max.   :310000   Max.   :110.00  
##  NA's   :1       NA's   :1       NA's   :1        NA's   :156     
##   plastic_bags      wrappers      sports_balls   homes_powered  
##  Min.   :    0   Min.   :  180   Min.   : 0.00   Min.   : 0.00  
##  1st Qu.:  280   1st Qu.:  840   1st Qu.: 6.00   1st Qu.:37.83  
##  Median :  680   Median : 1380   Median :11.00   Median :49.50  
##  Mean   : 1082   Mean   : 2330   Mean   :13.17   Mean   :45.87  
##  3rd Qu.: 1400   3rd Qu.: 2635   3rd Qu.:18.25   3rd Qu.:57.50  
##  Max.   :13450   Max.   :20100   Max.   :56.00   Max.   :93.67  
##  NA's   :1       NA's   :118     NA's   :261     NA's   :2

trash_df %>% 
  filter(
    wheel == "mr_trash"
  ) %>% 
  summarise(sum(weight_tons, na.rm=TRUE))
## # A tibble: 1 × 1
##   `sum(weight_tons, na.rm = TRUE)`
##                              <dbl>
## 1                            1875.

trash_df %>% 
  filter(
    wheel == "gwynnda",
    year == 2022,
    month == "June"
  ) %>% 
  summarise(sum(cigarette_butts, na.rm=TRUE))
## # A tibble: 1 × 1
##   `sum(cigarette_butts, na.rm = TRUE)`
##                                  <dbl>
## 1                                18120
```
